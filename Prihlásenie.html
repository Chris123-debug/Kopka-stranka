<script>
    let isLogin = true;
    let currentEmail = "";

    window.onload = function() {
        currentEmail = localStorage.getItem('currentEmail') || "";
        if (currentEmail !== "") {
            showWelcome();
        }
    };

    function showWelcome() {
        document.getElementById('welcome-message').innerText = 'Vitajte, ' + currentEmail;
        document.getElementById('authForm').style.display = 'none';
        document.getElementById('toggle-message').style.display = 'none';
        document.getElementById('welcome-section').style.display = 'block';
        document.getElementById('form-title').innerText = 'Úvodná obrazovka';
        
        // Načítanie a zobrazenie bodov prihláseného používateľa
        let userData = JSON.parse(localStorage.getItem(currentEmail)) || {};
        let userScore = userData.score || 0;
        document.getElementById('userScore').innerText = `Tvoje body: ${userScore}`;
    }

    function logout() {
        currentEmail = "";
        localStorage.removeItem('currentEmail');
        document.getElementById('authForm').style.display = 'block';
        document.getElementById('toggle-message').style.display = 'block';
        document.getElementById('welcome-section').style.display = 'none';
        document.getElementById('form-title').innerText = 'Prihlásenie';
    }

    document.getElementById('authForm').addEventListener('submit', function(event) {
        event.preventDefault();
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;

        if (isLogin) {
            const storedUser = JSON.parse(localStorage.getItem(email));
            if (storedUser && storedUser.password === password) {
                currentEmail = email;
                localStorage.setItem('currentEmail', currentEmail);
                showWelcome();
            } else {
                document.getElementById('error-message').innerText = 'Nesprávne prihlasovacie údaje!';
                document.getElementById('error-message').style.display = 'block';
            }
        } else {
            const confirmPassword = document.getElementById('confirmPassword').value;
            if (password !== confirmPassword) {
                document.getElementById('error-message').innerText = 'Heslá sa nezhodujú!';
                document.getElementById('error-message').style.display = 'block';
            } else if (localStorage.getItem(email)) {
                document.getElementById('error-message').innerText = 'Používateľ už existuje!';
                document.getElementById('error-message').style.display = 'block';
            } else {
                localStorage.setItem(email, JSON.stringify({ email: email, password: password, score: 0 }));
                alert('Registrácia úspešná! Teraz sa môžete prihlásiť.');
                toggleForm();
            }
        }
    });
</script>




